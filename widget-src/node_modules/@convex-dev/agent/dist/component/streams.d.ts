import { type MessageWithMetadataInternal } from "../validators.js";
import type { Doc, Id } from "./_generated/dataModel.js";
import { type MutationCtx } from "./_generated/server.js";
import type { WithoutSystemFields } from "convex/server";
export declare const addDelta: import("convex/server").RegisteredMutation<"public", {
    streamId: import("convex/values").GenericId<"streamingMessages">;
    start: number;
    end: number;
    parts: any[];
}, Promise<boolean>>;
export declare const listDeltas: import("convex/server").RegisteredQuery<"public", {
    threadId: import("convex/values").GenericId<"threads">;
    cursors: {
        streamId: import("convex/values").GenericId<"streamingMessages">;
        cursor: number;
    }[];
}, Promise<{
    streamId: string;
    start: number;
    end: number;
    parts: any[];
}[]>>;
export declare const create: import("convex/server").RegisteredMutation<"public", {
    userId?: string | undefined;
    agentName?: string | undefined;
    model?: string | undefined;
    provider?: string | undefined;
    providerOptions?: Record<string, Record<string, any>> | undefined;
    format?: "UIMessageChunk" | "TextStreamPart" | undefined;
    order: number;
    threadId: import("convex/values").GenericId<"threads">;
    stepOrder: number;
}, Promise<import("convex/values").GenericId<"streamingMessages">>>;
export declare const list: import("convex/server").RegisteredQuery<"public", {
    startOrder?: number | undefined;
    statuses?: ("streaming" | "finished" | "aborted")[] | undefined;
    threadId: import("convex/values").GenericId<"threads">;
}, Promise<{
    userId?: string | undefined;
    agentName?: string | undefined;
    model?: string | undefined;
    provider?: string | undefined;
    providerOptions?: Record<string, Record<string, any>> | undefined;
    format?: "UIMessageChunk" | "TextStreamPart" | undefined;
    status: "streaming" | "finished" | "aborted";
    order: number;
    stepOrder: number;
    streamId: string;
}[]>>;
export declare const abortByOrder: import("convex/server").RegisteredMutation<"public", {
    order: number;
    threadId: import("convex/values").GenericId<"threads">;
    reason: string;
}, Promise<boolean>>;
export declare const abort: import("convex/server").RegisteredMutation<"public", {
    streamId: Id<"streamingMessages">;
    reason: string;
    finalDelta?: WithoutSystemFields<Doc<"streamDeltas">>;
}, Promise<boolean>>;
export declare const finish: import("convex/server").RegisteredMutation<"public", {
    streamId: Id<"streamingMessages">;
    finalDelta?: WithoutSystemFields<Doc<"streamDeltas">>;
}, Promise<void>>;
export declare function finishHandler(ctx: MutationCtx, args: {
    streamId: Id<"streamingMessages">;
    finalDelta?: WithoutSystemFields<Doc<"streamDeltas">>;
}): Promise<void>;
export declare const heartbeat: import("convex/server").RegisteredMutation<"public", {
    streamId: Id<"streamingMessages">;
}, Promise<void>>;
export declare const timeoutStream: import("convex/server").RegisteredMutation<"internal", {
    streamId: import("convex/values").GenericId<"streamingMessages">;
}, Promise<void>>;
export declare function deleteStreamsPageForThreadId(ctx: MutationCtx, args: {
    threadId: Id<"threads">;
    streamOrder?: number;
    deltaCursor?: string;
}): Promise<{
    isDone: boolean;
    streamOrder: undefined;
    deltaCursor: undefined;
} | {
    isDone: boolean;
    streamOrder: number;
    deltaCursor: string | undefined;
}>;
export declare const deleteStreamsPageForThreadIdMutation: import("convex/server").RegisteredMutation<"internal", {
    threadId: Id<"threads">;
    streamOrder?: number;
    deltaCursor?: string;
}, Promise<{
    isDone: boolean;
    streamOrder: undefined;
    deltaCursor: undefined;
} | {
    isDone: boolean;
    streamOrder: number;
    deltaCursor: string | undefined;
}>>;
export declare const deleteAllStreamsForThreadIdAsync: import("convex/server").RegisteredMutation<"public", {
    streamOrder?: number | undefined;
    deltaCursor?: string | undefined;
    threadId: import("convex/values").GenericId<"threads">;
}, Promise<{
    isDone: boolean;
    streamOrder?: number;
    deltaCursor?: string;
}>>;
export declare const deleteStreamSync: import("convex/server").RegisteredMutation<"public", {
    streamId: import("convex/values").GenericId<"streamingMessages">;
}, Promise<void>>;
export declare const deleteStreamAsync: import("convex/server").RegisteredMutation<"public", {
    cursor?: string | undefined;
    streamId: import("convex/values").GenericId<"streamingMessages">;
}, Promise<void>>;
export declare const deleteAllStreamsForThreadIdSync: import("convex/server").RegisteredAction<"public", {
    threadId: import("convex/values").GenericId<"threads">;
}, Promise<void>>;
export declare function getStreamingMessages(ctx: MutationCtx, threadId: Id<"threads">, order: number, stepOrder: number): Promise<Doc<"streamingMessages">[]>;
export declare function getStreamingMessagesWithMetadata(ctx: MutationCtx, { threadId, order, stepOrder, }: {
    threadId: Id<"threads">;
    order: number;
    stepOrder: number;
}, metadata: {
    status: "success" | "failed";
    error?: string;
}): Promise<MessageWithMetadataInternal[]>;
//# sourceMappingURL=streams.d.ts.map